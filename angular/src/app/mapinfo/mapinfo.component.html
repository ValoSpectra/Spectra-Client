<div id="MappoolInfo" class="flex flex-col border border-surface rounded-lg p-5 gap-3">
  <p-blockui [target]="toBlock" [blocked]="blocked"></p-blockui>
  <blockable-div #toBlock class="flex flex-col gap-3">
    <h2 class="text-xl text-color font-bold">{{ position | titlecase }} Map</h2>
    <div class="flex flex-row gap-3">
      <div class="w-1/2">
        <p-floatlabel variant="on">
          <p-select
            fluid
            [options]="getMapTimeOptions()"
            id="MapTimeSelect"
            [(ngModel)]="data.type"
          ></p-select>
          <label for="MapTimeSelect">When is/was the match</label>
        </p-floatlabel>
      </div>

      <div class="w-1/2">
        <p-floatlabel variant="on">
          @if (data.type === "Present") {
            <p-select fluid [disabled]="true" id="MapNameInput"></p-select>
            <label for="MapNameInput">Map Name Automatic</label>
          } @else {
            <p-select
              fluid
              [(ngModel)]="data.map"
              [options]="mapSuggestions"
              [editable]="true"
              [showClear]="true"
              id="MapNameInput"
            ></p-select>
            <label for="MapNameInput">Map Name</label>
          }
        </p-floatlabel>
      </div>
    </div>

    @if (data.type === "Past") {
      <div class="flex flex-row gap-3">
        <div class="w-1/2">
          <p-floatlabel variant="on">
            <p-inputnumber
              fluid
              id="MapLeftScore"
              [showButtons]="true"
              buttonLayout="horizontal"
              inputId="horizontal"
              spinnerMode="horizontal"
              [(ngModel)]="data.leftScore"
              [step]="1"
              min="0"
            >
              <ng-template #incrementbuttonicon>
                <span class="pi pi-plus"></span>
              </ng-template>
              <ng-template #decrementbuttonicon>
                <span class="pi pi-minus"></span>
              </ng-template>
            </p-inputnumber>
            <label for="MapLeftScore">Left Score</label>
          </p-floatlabel>
        </div>
        <div class="w-1/2">
          <p-floatlabel variant="on">
            <p-inputnumber
              fluid
              id="MapRightScore"
              [showButtons]="true"
              buttonLayout="horizontal"
              inputId="horizontal"
              spinnerMode="horizontal"
              [(ngModel)]="data.rightScore"
              [step]="1"
              min="0"
            >
              <ng-template #incrementbuttonicon>
                <span class="pi pi-plus"></span>
              </ng-template>
              <ng-template #decrementbuttonicon>
                <span class="pi pi-minus"></span>
              </ng-template>
            </p-inputnumber>
            <label for="MapRightScore">Right Score</label>
          </p-floatlabel>
        </div>
      </div>
    }

    @if (data.type !== "Past") {
      <label class="self-center -mb-2">Map Picker</label>
      <div class="flex justify-around">
        <div>
          <p-radiobutton
            name="picker-{{ position }}"
            value="left"
            [(ngModel)]="data.picker"
            inputId="MapLeftPicker-{{ position }}"
          />
          <label for="MapLeftPicker-{{ position }}" class="ml-2">Left Team</label>
        </div>
        @if (data.type === "Future") {
          <div>
            <p-radiobutton
              name="picker-{{ position }}"
              value="decider"
              [(ngModel)]="data.picker"
              inputId="MapDeciderPicker-{{ position }}"
            />
            <label for="MapDeciderPicker-{{ position }}" class="ml-2">Decider</label>
          </div>
        }
        <div>
          <p-radiobutton
            name="picker-{{ position }}"
            value="right"
            [(ngModel)]="data.picker"
            inputId="MapRightPicker-{{ position }}"
          />
          <label for="MapRightPicker-{{ position }}" class="ml-2">Right Team</label>
        </div>
      </div>
    }
  </blockable-div>
</div>
